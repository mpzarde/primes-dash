# Primes Dashboard

A web-based dashboard for monitoring the [prime-cubes](htcd tps://github.com/mpzarde/prime-cubes) project's computation results. This application provides real-time updates of prime cube calculations by parsing and monitoring log files generated by the prime-cubes project. The dashboard is designed for monitoring only and does not include functionality for launching or managing computation jobs.

## Architecture

### Overview

Primes Dashboard is a full-stack JavaScript/TypeScript application with:

- **Backend**: Node.js with Express and Socket.IO
- **Frontend**: Angular 15 with Angular Material
- **Communication**: REST API and real-time WebSocket updates

### Backend Architecture

The backend is built with Express.js and TypeScript, providing:

- **Log Parsing Service**: Monitors and parses log files from the prime-cubes project
- **Real-time Updates**: Uses Socket.IO to push updates to connected clients
- **REST API**: Provides endpoints for retrieving batch summaries, solutions, and system state

Key components:
- **Log Parser**: Parses summary.log and run_*.log files to extract batch and solution data
- **Socket Service**: Manages real-time communication with clients
- **API Routes**: Express routes for data retrieval

### Frontend Architecture

The frontend is built with Angular 15, featuring:

- **Angular Material**: UI component library for a consistent look and feel
- **Socket.IO Client**: Real-time communication with the backend
- **Responsive Design**: Works on desktop and mobile devices

## Development Setup

### Prerequisites

- Node.js (v18.0.0 or higher)
- npm (v8.0.0 or higher)
- Angular CLI (v15.2.11)
- Access to the prime-cubes project logs directory

### Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd primes-dash
   ```

2. Install dependencies for all workspaces:
   ```bash
   npm run install:all
   ```

3. Configure the backend:
   Create a `.env` file in the `backend` directory with the following content:
   ```
   LOGS_PATH=/path/to/prime-cubes/logs
   PORT=3000
   NODE_ENV=development
   ```

4. Start the development servers:
   ```bash
   npm run dev
   ```
   This will start both the backend and frontend servers concurrently.

5. Access the application:
   - Frontend: http://localhost:4200
   - Backend API: http://localhost:3000
   - Socket.IO: ws://localhost:3000/socket.io

### Development Workflow

- **Backend Development**: 
  ```bash
  cd backend
  npm run dev
  ```
  This starts the backend with ts-node-dev for automatic reloading.

- **Frontend Development**:
  ```bash
  cd frontend
  npm start
  ```
  This starts the Angular development server with proxy configuration.

## Production Build

### Building for Production

1. Build the frontend:
   ```bash
   npm run build
   ```
   This will create optimized production files in `frontend/dist/`.

2. Build the backend:
   ```bash
   cd backend
   npx tsc
   ```
   This will compile TypeScript to JavaScript in the `backend/dist/` directory.

### Deployment

1. Set up environment variables on your production server:
   ```
   LOGS_PATH=/path/to/prime-cubes/logs
   PORT=3000
   NODE_ENV=production
   ```

2. Deploy the backend:
   - Copy the `backend/dist` directory to your server
   - Install production dependencies:
     ```bash
     cd backend
     npm install --production
     ```
   - Start the server:
     ```bash
     node dist/index.js
     ```

3. Deploy the frontend:
   - Copy the `frontend/dist` directory to your web server
   - Configure your web server to serve the static files
   - For SPA routing, configure the server to redirect all requests to index.html

4. For a more robust deployment, consider using:
   - Process manager like PM2 for the backend
   - Nginx or Apache as a reverse proxy
   - Docker containers for consistent environments

## Configuration

### Backend Configuration

The backend is configured using environment variables:

| Variable | Description | Default |
|----------|-------------|---------|
| LOGS_PATH | Path to the prime-cubes logs directory | /Users/mpzarde/projects/prime-cubes/logs |
| PORT | Server port | 3000 |
| NODE_ENV | Environment (development/production) | development |

### Frontend Configuration

The frontend is configured using the Angular environment files:

- `environment.ts`: Development configuration
- `environment.prod.ts`: Production configuration

The proxy configuration (`proxy.conf.json`) is used during development to forward API requests to the backend.

## Features

- **Real-time Updates**: Get immediate notifications when new solutions are found
- **Batch Summaries**: View summaries of computation batches with detailed statistics
- **Solution Explorer**: Browse, filter, and analyze solutions with interactive tables
- **Responsive Design**: Access the dashboard from desktop or mobile devices

## Contributing

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/my-feature`
3. Commit your changes: `git commit -am 'Add my feature'`
4. Push to the branch: `git push origin feature/my-feature`
5. Submit a pull request

## License

MIT
